(window.webpackJsonp=window.webpackJsonp||[]).push([[314],{3259:function(gt,et,d){gt.exports={avatar:d(4034),basic:d(4035),"crop-image":d(4036),"customize-progress-bar":d(4037),defaultFileList:d(4038),directory:d(4039),"drag-sorting":d(4040),drag:d(4041),"file-type":d(4042),fileList:d(4043),"picture-card":d(4044),"picture-style":d(4045),"preview-file":d(4046),"transform-file":d(4047),"upload-custom-action-icon":d(4048),"upload-manually":d(4049),"upload-png-only":d(4050),"upload-with-aliyun-oss":d(4051)}},4055:function(gt,et,d){"use strict";d.r(et);var Ft=d(99),Y=d.n(Ft),vt=d(183),yt=d(89),Vt=d(496),m=d(0),g=d.n(m),Gt=d(22),p=d.n(Gt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nt=function(e,o){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},nt(e,o)};function Xt(e,o){nt(e,o);function t(){this.constructor=e}e.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var R=function(){return R=Object.assign||function(o){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])}return o},R.apply(this,arguments)};function ye(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)o.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}function be(e,o,t,n){var a=arguments.length,r=a<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,o,t,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(o,t,r):i(o,t))||r);return a>3&&r&&Object.defineProperty(o,t,r),r}function Ee(e,o){return function(t,n){o(t,n,e)}}function Re(e,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,o)}function Ce(e,o,t,n){function a(r){return r instanceof t?r:new t(function(i){i(r)})}return new(t||(t=Promise))(function(r,i){function s(u){try{c(n.next(u))}catch(b){i(b)}}function l(u){try{c(n.throw(u))}catch(b){i(b)}}function c(u){u.done?r(u.value):a(u.value).then(s,l)}c((n=n.apply(e,o||[])).next())})}function we(e,o){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,a,r,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(r=c[0]&2?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;(a=0,r)&&(c=[c[0]&2,r.value]);switch(c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(!(r=t.trys,r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=o.call(e,t)}catch(u){c=[6,u],a=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var bt=Object.create?function(e,o,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[t]}})}:function(e,o,t,n){n===void 0&&(n=t),e[n]=o[t]};function Se(e,o){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(o,t)&&bt(o,e,t)}function Et(e){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&e[o],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(e,o){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),a,r=[],i;try{for(;(o===void 0||o-- >0)&&!(a=n.next()).done;)r.push(a.value)}catch(s){i={error:s}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}return r}function xe(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(Bt(arguments[o]));return e}function Oe(){for(var e=0,o=0,t=arguments.length;o<t;o++)e+=arguments[o].length;for(var n=Array(e),a=0,o=0;o<t;o++)for(var r=arguments[o],i=0,s=r.length;i<s;i++,a++)n[a]=r[i];return n}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function Pe(e,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,o||[]),a,r=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(y){return new Promise(function(C,x){r.push([h,y,C,x])>1||s(h,y)})})}function s(h,y){try{l(n[h](y))}catch(C){b(r[0][3],C)}}function l(h){h.value instanceof J?Promise.resolve(h.value.v).then(c,u):b(r[0][2],h)}function c(h){s("next",h)}function u(h){s("throw",h)}function b(h,y){(h(y),r.shift(),r.length)&&s(r[0][0],r[0][1])}}function Te(e){var o,t;return o={},n("next"),n("throw",function(a){throw a}),n("return"),o[Symbol.iterator]=function(){return this},o;function n(a,r){o[a]=e[a]?function(i){return(t=!t)?{value:J(e[a](i)),done:a==="return"}:r?r(i):i}:r}}function Me(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e[Symbol.asyncIterator],t;return o?o.call(e):(e=typeof Et=="function"?Et(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(i){return new Promise(function(s,l){i=e[r](i),a(s,l,i.done,i.value)})}}function a(r,i,s,l){Promise.resolve(l).then(function(c){r({value:c,done:s})},i)}}function Ae(e,o){return Object.defineProperty?Object.defineProperty(e,"raw",{value:o}):e.raw=o,e}var Yt=Object.create?function(e,o){Object.defineProperty(e,"default",{enumerable:!0,value:o})}:function(e,o){e.default=o};function _e(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&bt(o,e,t);return Yt(o,e),o}function Le(e){return e&&e.__esModule?e:{default:e}}function De(e,o){if(!o.has(e))throw new TypeError("attempted to get private field on non-instance");return o.get(e)}function je(e,o,t){if(!o.has(e))throw new TypeError("attempted to set private field on non-instance");return o.set(e,t),t}function Jt(e,o,t,n,a,r){r===void 0&&(r=0);var i=xt(e,o,r),s=i.width,l=i.height,c=Math.min(s,t),u=Math.min(l,n);return c>u*a?{width:u*a,height:u}:{width:c,height:c/a}}function $(e,o,t,n,a){a===void 0&&(a=0);var r=xt(o.width,o.height,a),i=r.width,s=r.height;return{x:Rt(e.x,i,t.width,n),y:Rt(e.y,s,t.height,n)}}function Rt(e,o,t,n){var a=o*n/2-t/2;return Math.min(a,Math.max(e,-a))}function Ct(e,o){return Math.sqrt(Math.pow(e.y-o.y,2)+Math.pow(e.x-o.x,2))}function wt(e,o){return Math.atan2(o.y-e.y,o.x-e.x)*180/Math.PI}function $t(e,o,t,n,a,r,i){r===void 0&&(r=0),i===void 0&&(i=!0);var s=i&&r===0?Qt:Kt,l={x:s(100,((o.width-t.width/a)/2-e.x/a)/o.width*100),y:s(100,((o.height-t.height/a)/2-e.y/a)/o.height*100),width:s(100,t.width/o.width*100/a),height:s(100,t.height/o.height*100/a)},c=Math.round(s(o.naturalWidth,l.width*o.naturalWidth/100)),u=Math.round(s(o.naturalHeight,l.height*o.naturalHeight/100)),b=o.naturalWidth>=o.naturalHeight*n,h=b?{width:Math.round(u*n),height:u}:{width:c,height:Math.round(c/n)},y=R(R({},h),{x:Math.round(s(o.naturalWidth-h.width,l.x*o.naturalWidth/100)),y:Math.round(s(o.naturalHeight-h.height,l.y*o.naturalHeight/100))});return{croppedAreaPercentages:l,croppedAreaPixels:y}}function Qt(e,o){return Math.min(e,Math.max(0,o))}function Kt(e,o){return o}function kt(e,o,t){var n=o.width/o.naturalWidth;if(t){var a=t.height>t.width;return a?t.height/n/e.height:t.width/n/e.width}var r=e.width/e.height,i=o.naturalWidth>=o.naturalHeight*r;return i?o.naturalHeight/e.height:o.naturalWidth/e.width}function qt(e,o,t){var n=o.width/o.naturalWidth,a=kt(e,o,t),r=n*a,i={x:((o.naturalWidth-e.width)/2-e.x)*r,y:((o.naturalHeight-e.height)/2-e.y)*r};return{crop:i,zoom:a}}function St(e,o){return{x:(o.x+e.x)/2,y:(o.y+e.y)/2}}function Q(e,o,t,n,a){var r=Math.cos,i=Math.sin,s=a*Math.PI/180,l=(e-t)*r(s)-(o-n)*i(s)+t,c=(e-t)*i(s)+(o-n)*r(s)+n;return[l,c]}function xt(e,o,t){var n=e/2,a=o/2,r=[Q(0,0,n,a,t),Q(e,0,n,a,t),Q(e,o,n,a,t),Q(0,o,n,a,t)],i=Math.min.apply(Math,r.map(function(u){return u[0]})),s=Math.max.apply(Math,r.map(function(u){return u[0]})),l=Math.min.apply(Math,r.map(function(u){return u[1]})),c=Math.max.apply(Math,r.map(function(u){return u[1]}));return{width:s-i,height:c-l}}function K(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return e.filter(function(t){return typeof t=="string"&&t.length>0}).join(" ").trim()}var te=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,ee=1,ne=3,oe=function(e){Xt(o,e);function o(){var t=e!==null&&e.apply(this,arguments)||this;return t.imageRef=null,t.videoRef=null,t.containerRef=null,t.styleRef=null,t.containerRect=null,t.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},t.dragStartPosition={x:0,y:0},t.dragStartCrop={x:0,y:0},t.lastPinchDistance=0,t.lastPinchRotation=0,t.rafDragTimeout=null,t.rafPinchTimeout=null,t.wheelTimer=null,t.state={cropSize:null,hasWheelJustStarted:!1},t.preventZoomSafari=function(n){return n.preventDefault()},t.cleanEvents=function(){document.removeEventListener("mousemove",t.onMouseMove),document.removeEventListener("mouseup",t.onDragStopped),document.removeEventListener("touchmove",t.onTouchMove),document.removeEventListener("touchend",t.onDragStopped)},t.clearScrollEvent=function(){t.containerRef&&t.containerRef.removeEventListener("wheel",t.onWheel),t.wheelTimer&&clearTimeout(t.wheelTimer)},t.onMediaLoad=function(){t.computeSizes(),t.emitCropData(),t.setInitialCrop(),t.props.onMediaLoaded&&t.props.onMediaLoaded(t.mediaSize)},t.setInitialCrop=function(){var n=t.props,a=n.initialCroppedAreaPixels,r=n.cropSize;if(!a)return;var i=qt(a,t.mediaSize,r),s=i.crop,l=i.zoom;t.props.onCropChange(s),t.props.onZoomChange&&t.props.onZoomChange(l)},t.computeSizes=function(){var n,a,r,i,s,l,c=t.imageRef||t.videoRef;if(c&&t.containerRef){t.containerRect=t.containerRef.getBoundingClientRect(),t.mediaSize={width:c.offsetWidth,height:c.offsetHeight,naturalWidth:((n=t.imageRef)===null||n===void 0?void 0:n.naturalWidth)||((a=t.videoRef)===null||a===void 0?void 0:a.videoWidth)||0,naturalHeight:((r=t.imageRef)===null||r===void 0?void 0:r.naturalHeight)||((i=t.videoRef)===null||i===void 0?void 0:i.videoHeight)||0};var u=t.props.cropSize?t.props.cropSize:Jt(c.offsetWidth,c.offsetHeight,t.containerRect.width,t.containerRect.height,t.props.aspect,t.props.rotation);(((s=t.state.cropSize)===null||s===void 0?void 0:s.height)!==u.height||((l=t.state.cropSize)===null||l===void 0?void 0:l.width)!==u.width)&&(t.props.onCropSizeChange&&t.props.onCropSizeChange(u)),t.setState({cropSize:u},t.recomputeCropPosition)}},t.onMouseDown=function(n){n.preventDefault(),document.addEventListener("mousemove",t.onMouseMove),document.addEventListener("mouseup",t.onDragStopped),t.onDragStart(o.getMousePoint(n))},t.onMouseMove=function(n){return t.onDrag(o.getMousePoint(n))},t.onTouchStart=function(n){n.preventDefault(),document.addEventListener("touchmove",t.onTouchMove,{passive:!1}),document.addEventListener("touchend",t.onDragStopped),n.touches.length===2?t.onPinchStart(n):n.touches.length===1&&t.onDragStart(o.getTouchPoint(n.touches[0]))},t.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?t.onPinchMove(n):n.touches.length===1&&t.onDrag(o.getTouchPoint(n.touches[0]))},t.onDragStart=function(n){var a,r,i=n.x,s=n.y;t.dragStartPosition={x:i,y:s},t.dragStartCrop=R({},t.props.crop),(r=(a=t.props).onInteractionStart)===null||r===void 0||r.call(a)},t.onDrag=function(n){var a=n.x,r=n.y;t.rafDragTimeout&&window.cancelAnimationFrame(t.rafDragTimeout),t.rafDragTimeout=window.requestAnimationFrame(function(){if(!t.state.cropSize)return;if(a===void 0||r===void 0)return;var i=a-t.dragStartPosition.x,s=r-t.dragStartPosition.y,l={x:t.dragStartCrop.x+i,y:t.dragStartCrop.y+s},c=t.props.restrictPosition?$(l,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):l;t.props.onCropChange(c)})},t.onDragStopped=function(){var n,a;t.cleanEvents(),t.emitCropData(),(a=(n=t.props).onInteractionEnd)===null||a===void 0||a.call(n)},t.onWheel=function(n){n.preventDefault();var a=o.getMousePoint(n),r=t.props.zoom-n.deltaY*t.props.zoomSpeed/200;t.setNewZoom(r,a),t.state.hasWheelJustStarted||t.setState({hasWheelJustStarted:!0},function(){var i,s;return(s=(i=t.props).onInteractionStart)===null||s===void 0?void 0:s.call(i)}),t.wheelTimer&&clearTimeout(t.wheelTimer),t.wheelTimer=window.setTimeout(function(){return t.setState({hasWheelJustStarted:!1},function(){var i,s;return(s=(i=t.props).onInteractionEnd)===null||s===void 0?void 0:s.call(i)})},250)},t.getPointOnContainer=function(n){var a=n.x,r=n.y;if(!t.containerRect)throw new Error("The Cropper is not mounted");return{x:t.containerRect.width/2-(a-t.containerRect.left),y:t.containerRect.height/2-(r-t.containerRect.top)}},t.getPointOnMedia=function(n){var a=n.x,r=n.y,i=t.props,s=i.crop,l=i.zoom;return{x:(a+s.x)/l,y:(r+s.y)/l}},t.setNewZoom=function(n,a){if(!t.state.cropSize||!t.props.onZoomChange)return;var r=t.getPointOnContainer(a),i=t.getPointOnMedia(r),s=Math.min(t.props.maxZoom,Math.max(n,t.props.minZoom)),l={x:i.x*s-r.x,y:i.y*s-r.y},c=t.props.restrictPosition?$(l,t.mediaSize,t.state.cropSize,s,t.props.rotation):l;t.props.onCropChange(c),t.props.onZoomChange(s)},t.emitCropData=function(){if(!t.state.cropSize)return;var n=t.props.restrictPosition?$(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop,a=$t(n,t.mediaSize,t.state.cropSize,t.getAspect(),t.props.zoom,t.props.rotation,t.props.restrictPosition),r=a.croppedAreaPercentages,i=a.croppedAreaPixels;t.props.onCropComplete&&t.props.onCropComplete(r,i)},t.recomputeCropPosition=function(){if(!t.state.cropSize)return;var n=t.props.restrictPosition?$(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop;t.props.onCropChange(n),t.emitCropData()},t}return o.prototype.componentDidMount=function(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.props.disableAutomaticStylesInjection||(this.styleRef=document.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.styleRef.innerHTML=te,document.head.appendChild(this.styleRef)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()},o.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()},o.prototype.componentDidUpdate=function(t){var n,a,r,i;t.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):t.aspect!==this.props.aspect?this.computeSizes():t.zoom!==this.props.zoom?this.recomputeCropPosition():(((n=t.cropSize)===null||n===void 0?void 0:n.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((r=t.cropSize)===null||r===void 0?void 0:r.width)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.width))&&this.computeSizes(),t.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())},o.prototype.getAspect=function(){var t=this.props,n=t.cropSize,a=t.aspect;return n?n.width/n.height:a},o.prototype.onPinchStart=function(t){var n=o.getTouchPoint(t.touches[0]),a=o.getTouchPoint(t.touches[1]);this.lastPinchDistance=Ct(n,a),this.lastPinchRotation=wt(n,a),this.onDragStart(St(n,a))},o.prototype.onPinchMove=function(t){var n=this,a=o.getTouchPoint(t.touches[0]),r=o.getTouchPoint(t.touches[1]),i=St(a,r);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(function(){var s=Ct(a,r),l=n.props.zoom*(s/n.lastPinchDistance);n.setNewZoom(l,i),n.lastPinchDistance=s;var c=wt(a,r),u=n.props.rotation+(c-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(u),n.lastPinchRotation=c})},o.prototype.render=function(){var t=this,n=this.props,a=n.image,r=n.video,i=n.mediaProps,s=n.transform,l=n.crop,c=l.x,u=l.y,b=n.rotation,h=n.zoom,y=n.cropShape,C=n.showGrid,x=n.style,D=x.containerStyle,I=x.cropAreaStyle,N=x.mediaStyle,T=n.classes,k=T.containerClassName,O=T.cropAreaClassName,M=T.mediaClassName;return g.a.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(v){return t.containerRef=v},"data-testid":"container",style:D,className:K("reactEasyCrop_Container",k)},a?g.a.createElement("img",R({alt:"",className:K("reactEasyCrop_Image",M)},i,{src:a,ref:function(v){return t.imageRef=v},style:R(R({},N),{transform:s||"translate("+c+"px, "+u+"px) rotate("+b+"deg) scale("+h+")"}),onLoad:this.onMediaLoad})):r&&g.a.createElement("video",R({autoPlay:!0,loop:!0,muted:!0,className:K("reactEasyCrop_Video",M)},i,{src:r,ref:function(v){return t.videoRef=v},onLoadedMetadata:this.onMediaLoad,style:R(R({},N),{transform:s||"translate("+c+"px, "+u+"px) rotate("+b+"deg) scale("+h+")"}),controls:!1})),this.state.cropSize&&g.a.createElement("div",{style:R(R({},I),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:K("reactEasyCrop_CropArea",y==="round"&&"reactEasyCrop_CropAreaRound",C&&"reactEasyCrop_CropAreaGrid",O)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:ne,minZoom:ee,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},o.getMousePoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},o.getTouchPoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},o}(g.a.Component),re=oe,ae=d(36),ie=d(378),Ot=d(497);function se(e){if(!e)return;if(typeof window=="undefined")return;var o=document.createElement("style");return o.setAttribute("media","screen"),o.innerHTML=e,document.head.appendChild(o),e}se(`.antd-img-crop-modal .ant-modal-body {
  padding-bottom: 16px;
}
.antd-img-crop-modal .antd-img-crop-container {
  position: relative;
  width: 100%;
  height: 40vh;
  margin-bottom: 16px;
}
.antd-img-crop-modal .antd-img-crop-control {
  display: flex;
  align-items: center;
  width: 60%;
  margin-left: auto;
  margin-right: auto;
}
.antd-img-crop-modal .antd-img-crop-control button {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 34px;
  height: 34px;
  padding: 0;
  font-style: normal;
  background: transparent;
  border: 0;
  outline: 0;
  cursor: pointer;
}
.antd-img-crop-modal .antd-img-crop-control button[disabled] {
  cursor: default;
}
.antd-img-crop-modal .antd-img-crop-control.zoom button {
  font-size: 18px;
}
.antd-img-crop-modal .antd-img-crop-control.rotate button {
  font-size: 16px;
}
.antd-img-crop-modal .antd-img-crop-control.rotate button:first-of-type {
  transform: rotate(-20deg);
}
.antd-img-crop-modal .antd-img-crop-control.rotate button:last-of-type {
  transform: rotate(20deg);
}
.antd-img-crop-modal .antd-img-crop-control .ant-slider {
  flex: 1;
  margin: 0 8px;
}
`);var Z="antd-img-crop",Pt=function(){},Tt=Z+"-media",W=.1,Mt=0,At=360,ot=1,_t=Object(m.forwardRef)(function(e,o){var t=e.src,n=e.aspect,a=e.shape,r=e.grid,i=e.hasZoom,s=e.zoomVal,l=e.rotateVal,c=e.setZoomVal,u=e.setRotateVal,b=e.minZoom,h=e.maxZoom,y=e.onComplete,C=Object(m.useState)({x:0,y:0}),x=C[0],D=C[1],I=Object(m.useCallback)(function(N,T){y(T)},[y]);return g.a.createElement(re,{ref:o,image:t,crop:x,onCropChange:D,aspect:n,cropShape:a,showGrid:r,zoomWithScroll:i,zoom:s,rotation:l,onZoomChange:c,onRotationChange:u,minZoom:b,maxZoom:h,onCropComplete:I,classes:{containerClassName:Z+"-container",mediaClassName:Tt}})});_t.propTypes={src:p.a.string,aspect:p.a.number,shape:p.a.string,grid:p.a.bool,hasZoom:p.a.bool,zoomVal:p.a.number,rotateVal:p.a.number,setZoomVal:p.a.func,setRotateVal:p.a.func,minZoom:p.a.number,maxZoom:p.a.number,onComplete:p.a.func};var rt=Object(m.forwardRef)(function(e,o){var t=e.aspect,n=e.shape,a=e.grid,r=e.zoom,i=e.rotate,s=e.minZoom,l=e.maxZoom,c=e.modalTitle,u=e.modalWidth,b=e.modalOk,h=e.modalCancel,y=e.beforeCrop,C=e.children,x=r===!0,D=i===!0,I=Object(m.useState)(""),N=I[0],T=I[1],k=Object(m.useState)(1),O=k[0],M=k[1],H=Object(m.useState)(0),v=H[0],F=H[1],at=Object(m.useRef)(),Lt=Object(m.useRef)(),q=Object(m.useRef)(Pt),it=Object(m.useRef)(Pt),Dt=Object(m.useRef)(),ce=Object(m.useCallback)(function(){var w=Array.isArray(C)?C[0]:C,E=w.props,V=E.beforeUpload,G=E.accept,P=Object(Vt.a)(E,["beforeUpload","accept"]);return at.current=V,Object(yt.a)({},w,{props:Object(yt.a)({},P,{accept:G||"image/*",beforeUpload:function(S,j){return new Promise(function(X,z){if(y&&!y(S,j)){z();return}Lt.current=S,q.current=X,it.current=z;var U=new FileReader;U.addEventListener("load",function(){T(U.result)}),U.readAsDataURL(S)})}})})},[y,C]),le=Object(m.useCallback)(function(w){Dt.current=w},[]),st=O-W<s,ct=O+W>l,lt=v===Mt,ut=v===At,ue=Object(m.useCallback)(function(){st||M(O-W)},[st,O]),de=Object(m.useCallback)(function(){ct||M(O+W)},[ct,O]),he=Object(m.useCallback)(function(){lt||F(v-ot)},[lt,v]),pe=Object(m.useCallback)(function(){ut||F(v+ot)},[ut,v]),me=Object(m.useMemo)(function(){var w={width:u,okText:b,cancelText:h};return Object.keys(w).forEach(function(E){w[E]||delete w[E]}),w},[h,b,u]),dt=Object(m.useCallback)(function(){T(""),M(1),F(0)},[]),fe=Object(m.useCallback)(Object(vt.a)(Y.a.mark(function w(){var E,V,G,P,A,S,j,X,z,U,B,It,Nt,zt,Ut,tt,ht,Zt,Wt;return Y.a.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:dt(),E=document.querySelector("."+Tt),V=E.naturalWidth,G=E.naturalHeight,P=document.createElement("canvas"),A=P.getContext("2d"),S=Math.sqrt(Math.pow(V,2)+Math.pow(G,2)),P.width=S,P.height=S,D&&v>0&&v<360&&(j=S/2,A.translate(j,j),A.rotate(v*Math.PI/180),A.translate(-j,-j)),X=(S-V)/2,z=(S-G)/2,A.drawImage(E,X,z),U=A.getImageData(0,0,S,S),B=Dt.current,It=B.width,Nt=B.height,zt=B.x,Ut=B.y,P.width=It,P.height=Nt,A.putImageData(U,Math.round(-X-zt),Math.round(-z-Ut)),tt=Lt.current,ht=tt.type,Zt=tt.name,Wt=tt.uid,P.toBlob(function(){var ge=Object(vt.a)(Y.a.mark(function Ht(ve){var _,L,mt,ft;return Y.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(_=new File([ve],Zt,{type:ht}),_.uid=Wt,!(typeof at.current!="function")){f.next=4;break}return f.abrupt("return",q.current(_));case 4:if(L=at.current(_,[_]),!(typeof L!="boolean"&&!L)){f.next=8;break}return console.error("beforeUpload must return a boolean or Promise"),f.abrupt("return");case 8:if(!(L===!0)){f.next=10;break}return f.abrupt("return",q.current(_));case 10:if(!(L===!1)){f.next=12;break}return f.abrupt("return",it.current("not upload"));case 12:if(!(L&&typeof L.then=="function")){f.next=25;break}return f.prev=13,f.next=16,L;case 16:mt=f.sent,ft=Object.prototype.toString.call(mt),(ft==="[object File]"||ft==="[object Blob]")&&(_=mt),q.current(_),f.next=25;break;case 22:f.prev=22,f.t0=f.catch(13),it.current(f.t0);case 25:case"end":return f.stop()}},Ht,null,[[13,22]])}));return function(Ht){return ge.apply(this,arguments)}}(),ht,.4);case 19:case"end":return pt.stop()}},w)})),[D,dt,v]),jt=function(E){return g.a.createElement(g.a.Fragment,null,ce(),N&&g.a.createElement(ie.default,Object.assign({visible:!0,wrapClassName:Z+"-modal",title:E,onOk:fe,onCancel:dt,maskClosable:!1,destroyOnClose:!0},me),g.a.createElement(_t,{ref:o,src:N,aspect:t,shape:n,grid:a,hasZoom:x,zoomVal:O,rotateVal:v,setZoomVal:M,setRotateVal:F,minZoom:s,maxZoom:l,onComplete:le}),x&&g.a.createElement("div",{className:Z+"-control zoom"},g.a.createElement("button",{onClick:ue,disabled:st},"－"),g.a.createElement(Ot.a,{min:s,max:l,step:W,value:O,onChange:M}),g.a.createElement("button",{onClick:de,disabled:ct},"＋")),D&&g.a.createElement("div",{className:Z+"-control rotate"},g.a.createElement("button",{onClick:he,disabled:lt},"↺"),g.a.createElement(Ot.a,{min:Mt,max:At,step:ot,value:v,onChange:F}),g.a.createElement("button",{onClick:pe,disabled:ut},"↻"))))};return c?jt(c):g.a.createElement(ae.a,null,function(w,E){return jt(E==="zh-cn"?"编辑图片":"Edit image")})});rt.propTypes={aspect:p.a.number,shape:p.a.oneOf(["rect","round"]),grid:p.a.bool,zoom:p.a.bool,rotate:p.a.bool,minZoom:p.a.number,maxZoom:p.a.number,modalTitle:p.a.string,modalWidth:p.a.oneOfType([p.a.number,p.a.string]),modalOk:p.a.string,modalCancel:p.a.string,beforeCrop:p.a.func,children:p.a.node},rt.defaultProps={aspect:1,shape:"rect",grid:!1,zoom:!0,rotate:!1,minZoom:1,maxZoom:3};var Ie=et.default=rt}}]);
